<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;ruby&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a href="//wrenchmode.com"><img src="images/logo.png" /></a>
        <div class="lang-selector">
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Wrenchmode is the fastest, easiest way to create a beautiful &ldquo;Down For Maintenance&rdquo; page for your web app. Following these basic instructions, you will have your Wrenchmode project set up in less than 5 minutes.</p>

<h1 id="installation-as-a-heroku-addon">Installation As A Heroku Addon</h1>
<pre class="highlight ruby"><code><span class="c1"># Install the Heroku Addon via the CLI</span>
<span class="n">heroku</span> <span class="n">addons</span><span class="ss">:create</span> <span class="n">wrenchmode</span>

<span class="c1"># In your Gemfile</span>
<span class="n">gem</span> <span class="s1">'wrenchmode-rack'</span> 

<span class="c1"># For Ruby on Rails, add this to /config/environments/production.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">middleware</span><span class="p">.</span><span class="nf">insert_before</span> <span class="mi">0</span><span class="p">,</span> <span class="no">Wrenchmode</span><span class="o">::</span><span class="no">Rack</span>

<span class="c1"># For a Rack application, add this to your-rack-app.rb</span>
<span class="nb">require</span> <span class="s1">'rubygems'</span> 
<span class="nb">require</span> <span class="s1">'bundler/setup'</span> 
<span class="no">Bundler</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:default</span><span class="p">)</span> 
<span class="n">use</span> <span class="no">Wrenchmode</span><span class="o">::</span><span class="no">Rack</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Install the Heroku Addon via the CLI</span>
<span class="nx">heroku</span> <span class="nx">addons</span><span class="err">:</span><span class="nx">create</span> <span class="nx">wrenchmode</span>

<span class="c1">// Install the npm package</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="nx">wrenchmode</span><span class="o">-</span><span class="nx">express</span>

<span class="c1">// In your app.js </span>
<span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">wrenchmodeExpress</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'wrenchmode-express'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">wrenchmodeExpress</span><span class="p">());</span>
</code></pre>

<p>(Be patient with any issues, we&rsquo;re still in the submission process with our Addon)</p>

<p>Add the Wrenchmode Addon via the Heroku CLI. Then install the middleware layer. For Ruby/Rack, this means a Rubygem. For NodeJS/Express, this means an npm package. Finally, make sure to include the middleware layer in your application.</p>

<p>Once everything is installed, you can go to your Heroku dashboard and click on the Wrenchmode link to log into your Wrenchmode dashboard. From there you can turn Wrenchmode on and off for your project.</p>

<h1 id="manual-installation-non-heroku">Manual Installation (non-Heroku)</h1>
<pre class="highlight ruby"><code><span class="c1"># In your Gemfile</span>
<span class="n">gem</span> <span class="s1">'wrenchmode-rack'</span> 

<span class="c1"># For Ruby on Rails, add this to /config/environments/production.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">middleware</span><span class="p">.</span><span class="nf">insert_before</span> <span class="mi">0</span><span class="p">,</span> <span class="no">Wrenchmode</span><span class="o">::</span><span class="no">Rack</span><span class="p">,</span> <span class="ss">jwt: </span><span class="s2">"copy-and-paste-the-JWT-from-your-project-page-it-will-be-long!"</span>

<span class="c1"># For a Rack application, add this to your-rack-app.rb</span>
<span class="nb">require</span> <span class="s1">'rubygems'</span> 
<span class="nb">require</span> <span class="s1">'bundler/setup'</span> 
<span class="no">Bundler</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:default</span><span class="p">)</span> 
<span class="n">use</span> <span class="no">Wrenchmode</span><span class="o">::</span><span class="no">Rack</span><span class="p">,</span> <span class="ss">jwt: </span><span class="s2">"copy-and-paste-the-JWT-from-your-project-page-it-will-be-long!"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Install the npm package</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="nx">wrenchmode</span><span class="o">-</span><span class="nx">express</span>

<span class="c1">// In your app.js </span>
<span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">wrenchmodeExpress</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'wrenchmode-express'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">wrenchmodeExpress</span><span class="p">({</span>
  <span class="na">jwt</span><span class="p">:</span> <span class="s2">"your-really-long-jwt"</span>
<span class="p">}));</span>
</code></pre>

<p>Install the middleware layer. For Ruby/Rack, this means a Rubygem. For NodeJS/Express, this means an npm package. Include the middleware layer in your application and configure it with your JWT, which can be found on your project page in the Wrenchmode dashboard.</p>

          <h1 id="configuration-options">Configuration Options</h1>
<pre class="highlight ruby"><code><span class="c1"># You can change these settings if necessary, but it's not recommended</span>
<span class="n">use</span> <span class="no">Wrenchmode</span><span class="o">::</span><span class="no">Rack</span><span class="p">,</span>
  <span class="ss">jwt: </span><span class="s2">"your-really-long-jwt"</span><span class="p">,</span>
  <span class="ss">force_open: </span><span class="kp">false</span><span class="p">,</span>
  <span class="ss">ignore_test_mode: </span><span class="kp">true</span><span class="p">,</span>
  <span class="ss">disable_local_wrench: </span><span class="kp">false</span><span class="p">,</span>
  <span class="ss">check_delay_secs: </span><span class="mi">5</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// You can change these settings if necessary, but it's not recommended</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">wrenchmodeExpress</span><span class="p">({</span>
  <span class="na">jwt</span><span class="p">:</span> <span class="s2">"your-really-long-jwt"</span><span class="p">,</span>
  <span class="na">forceOpen</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">ignoreTestMode</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">disableLocalWrench</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">checkDelaySecs</span><span class="p">:</span> <span class="mi">5</span>
<span class="p">}));</span>
</code></pre>

<p>When instantiating the middleware, you can set the following options:</p>

<table><thead>
<tr>
<th>Option</th>
<th>Usage</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>Force Open</td>
<td>Set to true to force the middlware layer to allow all requests through, regardless of project status on Wrenchmode.com. Effectively disables the middleware.</td>
<td>false</td>
</tr>
<tr>
<td>Ignore Test Mode</td>
<td>(Coming soon&hellip;) Set to false to if you want the middleware to respond to a project that is in Test mode on Wrenchmode.com This can be useful if you want to test Wrenchmode in a development or staging environment prior to deploying to production.</td>
<td>true</td>
</tr>
<tr>
<td>Disable Local Wrench</td>
<td>(Coming soon&hellip;) Set to true if you want to disable LocalWrench mode, where the Wrenchmode page is served on your domain. Disabling it will instead force a redirect to the Wrenchmode.com domain. Note: Unless you explicitly want this behavior, it&rsquo;s best to leave this at the default.</td>
<td>false</td>
</tr>
<tr>
<td>Check Delay (Seconds)</td>
<td>Change this to modify the rate at which the middleware polls Wrenchmode for updates. Unlikely that this needs anything faster than the default.</td>
<td>5</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
